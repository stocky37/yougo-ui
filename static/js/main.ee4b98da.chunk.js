(this["webpackJsonpyougo-ui"]=this["webpackJsonpyougo-ui"]||[]).push([[0],{589:function(e,t,a){"use strict";a.r(t);a(388),a(417);var c=a(42),n=a(5),r=a.n(n),i=function(e){var t=e.fallback,a=e.children;return Object(c.b)().isAuthenticated?a:t};i.propTypes={fallback:r.a.node,children:r.a.node.isRequired},i.defaultProps={fallback:null};var o=i,s=a(9),l=a(17),j=a(625),u=a(380),b=a(34),d=a.n(b),O=a(24),h=a(623),f=a(624),m=a(101),x=a(210),v=a(366),g=a.n(v),p=a(0),C=a.n(p),N=a(2),y=Object(p.createContext)(""),S=Object(p.createContext)(""),P=function(e){var t=e.children,a=Object(p.useState)(""),c=Object(O.a)(a,2),n=c[0],r=c[1];return Object(N.jsx)(y.Provider,{value:n,children:Object(N.jsx)(S.Provider,{value:r,children:t})})};function k(){var e=Object(p.useContext)(y);if(void 0===e)throw new Error("useSearch must be used within a SearchContext");return e}function A(){var e=Object(p.useContext)(S);if(void 0===e)throw new Error("useSearch must be used within a SearchContext");return e}var _=a(353),w=a.n(_),R=Object(u.a)({root:{width:"100%"}}),T=function(e){var t=e.className,a=R(),c=[k(),A()],n=Object(O.a)(c,2),r=n[0],i=n[1],o=Object(p.useCallback)((function(e){return i(e)}),[i]),s=Object(p.useCallback)((function(){return i("")}),[i]);return Object(N.jsx)(w.a,{className:d()(a.root,t),value:r,onChange:o,onCancelSearch:s})};T.defaultProps={className:void 0};var E=T,I=a(634),D=a(358),L=a(617),G=a(320),U=a(614),M=a(212),W=a(99),B=Object(u.a)((function(e){return{avatar:{width:e.spacing(4),height:e.spacing(4)}}})),z=function(e){var t=Object(c.b)(),a=t.user,n=t.logout,r=t.loginWithRedirect,i=t.isAuthenticated,o=B(),l=Object(W.usePopupState)({variant:"popover"}),j=Object(p.useCallback)((function(){l.close(),n()}),[l,n]);return i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(G.a,Object(s.a)(Object(s.a)(Object(s.a)({color:"inherit"},Object(M.bindTrigger)(l)),e),{},{children:[Object(N.jsx)(I.a,{className:o.avatar,imgProps:{referrerPolicy:"no-referrer"},src:a.picture}),Object(N.jsx)(U.a,{})]})),Object(N.jsxs)(D.a,Object(s.a)(Object(s.a)({getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},Object(M.bindMenu)(l)),{},{children:[Object(N.jsx)(L.a,{onClick:l.close,children:"Profile"}),Object(N.jsx)(L.a,{onClick:l.close,children:"My account"}),Object(N.jsx)(L.a,{onClick:j,children:"Logout"})]}))]}):Object(N.jsx)(G.a,{color:"inherit",onClick:r,children:Object(N.jsx)(I.a,{className:o.avatar})})},H=a(18),V=a(19),F=a(359),Y=a.n(F);function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"REACT_APP_",c=a+e;return window.env&&c in window.env?window.env[c]:c in Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OIDC_CLIENT_ID:"VAaM5ckAGBxVjgZDxBFiYuP4zGmS7CBn",REACT_APP_OIDC_AUTHORITY:"yougo.au.auth0.com",REACT_APP_API_URL:"https://yougo-api.herokuapp.com"})?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OIDC_CLIENT_ID:"VAaM5ckAGBxVjgZDxBFiYuP4zGmS7CBn",REACT_APP_OIDC_AUTHORITY:"yougo.au.auth0.com",REACT_APP_API_URL:"https://yougo-api.herokuapp.com"})[c]:t}var K=q("API_URL","http://localhost:8080"),Q=q("OIDC_AUTHORITY"),J=q("OIDC_CLIENT_ID"),Z=q("OIDC_REDIRECT_URI",window.location.origin),$=parseInt(q("CACHE_STALE_TIME","60000"),10),X=function(){function e(t){var a,c=t.token,n=Object(l.a)(t,["token"]);Object(H.a)(this,e),this.axios=Y.a.create(Object(s.a)(Object(s.a)({},n),{},{baseURL:"".concat(null!==(a=n.baseURL)&&void 0!==a?a:K),headers:Object(s.a)({Authorization:"Bearer ".concat(c)},n.headers)}))}return Object(V.a)(e,[{key:"findGoByIdOrAlias",value:function(e){return this.axios.get("/gos/".concat(e)).then((function(e){return e.data}))}},{key:"listGos",value:function(){return this.axios.get("/gos").then((function(e){return e.data}))}},{key:"createGo",value:function(e){return this.axios.post("/gos",e).then((function(e){return e.data}))}},{key:"patchGo",value:function(e,t){return this.axios.patch("/gos/".concat(e),t).then((function(e){return e.data}))}},{key:"deleteGo",value:function(e){return this.axios.delete("/gos/".concat(e)).then((function(e){return e.data}))}}]),e}();function ee(){return(0,Object(c.b)().getAccessTokenSilently)().then((function(e){return new X({token:e})}))}var te=a(158),ae=a(635),ce="gos",ne="go";var re=a(618),ie=a(619),oe=a(620),se=a(621),le=a(10),je=function(e){var t=e.children,a=e.className,c=e.title,n=e.action,r=e.onClose,i=Object(l.a)(e,["children","className","title","action","onClose"]),o=Object(p.useRef)(),j=Object(p.useCallback)((function(){o.current&&o.current.submitForm()}),[o]);return Object(N.jsxs)(re.a,Object(s.a)(Object(s.a)({open:!0,fullWidth:!0,onClose:r,className:a},i),{},{children:[c&&Object(N.jsx)(ie.a,{children:c}),Object(N.jsx)(oe.a,{children:t(o)}),Object(N.jsxs)(se.a,{children:[Object(N.jsx)(G.a,{onClick:r,children:"Cancel"}),Object(N.jsx)(G.a,{color:"secondary",onClick:j,children:Object(le.a)(n)})]})]}))};je.defaultProps={action:"Submit",className:void 0,title:void 0};var ue=je,be=a(636),de=a(48),Oe=a(213),he=a(120),fe=Object(he.a)().shape({id:Object(he.b)(),alias:Object(he.b)().trim().required().matches(/^[\w-]+$/,{excludeEmptyString:!0,message:"Go must not contain whitespace"}),href:Object(he.b)().trim().required().url()}),me=(r.a.shape({id:r.a.string.isRequired,alias:r.a.string.isRequired,href:r.a.string.isRequired}),r.a.oneOfType([r.a.func,r.a.shape({current:r.a.any})]),{alias:"",href:""}),xe=function(e){var t=e.className,a=e.onSubmit,c=e.initialValues,n=e.innerRef,r=Object(l.a)(e,["className","onSubmit","initialValues","innerRef"]);return Object(N.jsx)(de.c,Object(s.a)(Object(s.a)({initialValues:c||me,validationSchema:fe,onSubmit:a,innerRef:n},r),{},{children:Object(N.jsxs)(de.b,{className:t,children:[Object(N.jsx)(de.a,{component:Oe.a,name:"alias",label:"Alias",placeholder:"example",fullWidth:!0,autoFocus:!0}),Object(N.jsx)(de.a,{component:Oe.a,name:"href",label:"URL",placeholder:"http://example.com",fullWidth:!0}),Object(N.jsx)(be.a,{hidden:!0,children:Object(N.jsx)("button",{type:"submit",children:"Submit"})})]})}))};xe.defaultProps={className:void 0,initialValues:void 0};var ve=xe,ge=a(65),pe=function(e){var t=e.className,a=e.onClose,c=Object(l.a)(e,["className","onClose"]),n=Object(ge.useSnackbar)(),r=function(){var e=ee(),t=Object(te.b)();return Object(ae.a)((function(t){return e.then((function(e){return e.createGo(t)}))}),{onSuccess:function(){t.invalidateQueries([ce])}})}().mutateAsync,i=Object(p.useCallback)((function(e,t){var c=t.setSubmitting;r(e).then((function(){return n.showMessage("Created ".concat(e.alias))})).catch((function(){return n.showMessage("Can't create ".concat(e.alias))})).finally((function(){c(!1),a()}))}),[r,a,n]);return Object(N.jsx)(ue,Object(s.a)(Object(s.a)({className:t,title:"Add a go",action:"Add",onClose:a},c),{},{children:function(e){return Object(N.jsx)(ve,{onSubmit:i,innerRef:e})}}))};pe.defaultProps={className:void 0};var Ce=pe,Ne=a(96);function ye(){var e=Object(Ne.b)((function(){return Object(N.jsx)(Ce,{onClose:c})})),t=Object(O.a)(e,2),a=t[0],c=t[1];return[a,c]}var Se=a(633);function Pe(e){var t,a=function(){var e=ee();return Object(Se.a)([ce],(function(){return e.then((function(e){return e.listGos()}))}))}();return e.length<=2?a:Object(s.a)(Object(s.a)({},a),{},{data:(a.data||[]).filter((t=e,function(e){return Object.values(e).some((function(e){return e.toLowerCase().indexOf(t)>=0}))}))})}var ke=a(166),Ae=a.n(ke);var _e=Object(u.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.primary.dark},left:{flex:"1"},right:{flex:"1",textAlign:"end"},avatar:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},searchbar:{width:"100%"}}})),we=function(e){var t=e.className,a=Object(l.a)(e,["className"]),c=_e(),n=ye(),r=Object(O.a)(n,1)[0];return Object(N.jsx)(h.a,Object(s.a)(Object(s.a)({className:d()(c.root,t),position:"static"},a),{},{children:Object(N.jsxs)(f.a,{children:[Object(N.jsx)("div",{className:c.left,children:Object(N.jsx)(m.a,{variant:"h6",color:"inherit",className:c.flex,children:"Yougo"})}),Object(N.jsx)(j.a,{fixed:!0,children:Object(N.jsx)(E,{className:c.searchbar,cancelOnEscape:!0})}),Object(N.jsxs)("div",{className:c.right,children:[Object(N.jsx)(x.a,{color:"inherit",onClick:function(){r()},children:Object(N.jsx)(g.a,{})}),Object(N.jsx)(z,{})]})]})}))};we.defaultProps={className:void 0};var Re=we,Te=Object(u.a)((function(e){return{root:{height:"100vh",display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"min-content auto",gridTemplateAreas:"'header' 'content'"},header:{gridArea:"header"},content:{padding:e.spacing(3),gridArea:"content"}}})),Ee=function(e){var t=e.children,a=e.className,c=Object(l.a)(e,["children","className"]),n=Te();return Object(N.jsxs)("div",Object(s.a)(Object(s.a)({className:d()(n.root,a)},c),{},{children:[Object(N.jsx)(Re,{className:n.header}),Object(N.jsx)(j.a,{component:"main",className:n.content,fixed:!0,children:t})]}))};Ee.defaultProps={className:void 0};var Ie=Ee,De=a(626),Le=a(613),Ge=Object.freeze({domain:Q,clientId:J,redirectUri:Z,audience:K,cacheLocation:"localstorage",useRefreshTokens:!0}),Ue=new(a(632).a)({queries:{staleTime:$}}),Me=a(29),We=a(372),Be=Object(We.a)({palette:{primary:{main:Me.a.blueGrey[700]},secondary:Me.a.lightBlue},props:{MuiSnackbar:{autoHideDuration:4e3,anchorOrigin:{vertical:"bottom",horizontal:"left"}}}}),ze=function(e){var t=e.children;return Object(N.jsx)(c.a,Object(s.a)(Object(s.a)({},Ge),{},{children:Object(N.jsx)(Le.a,{theme:Be,children:Object(N.jsx)(ge.SnackbarProvider,{children:Object(N.jsx)(te.a,{client:Ue,children:Object(N.jsx)(Ne.a,{children:Object(N.jsxs)(P,{children:[Object(N.jsx)(De.a,{}),t]})})})})})}))},He=Object(u.a)((function(e){return{root:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",flexDirection:"column",color:Me.a.grey[500],"& > *":{margin:e.spacing(1)}}}})),Ve=function(e){var t=e.children,a=e.className,c=Object(l.a)(e,["children","className"]),n=He();return Object(N.jsx)(j.a,Object(s.a)(Object(s.a)({className:d()(n.root,a),fixed:!0},c),{},{children:t}))};Ve.defaultProps={className:void 0};var Fe=Ve,Ye=a(627),qe=function(e){var t=e.className,a=Object(l.a)(e,["className"]);return Object(N.jsxs)(Fe,Object(s.a)(Object(s.a)({className:t},a),{},{children:[Object(N.jsx)("div",{children:Object(N.jsx)(Ye.a,{size:60,color:"inherit"})}),Object(N.jsx)(m.a,{variant:"h4",color:"textPrimary",children:"Loading"}),Object(N.jsx)(m.a,{color:"textSecondary",children:"Please wait while we load your data"})]}))};qe.defaultProps={className:void 0};var Ke=qe,Qe=a(13),Je=a(39),Ze=Object(Je.b)(),$e=function(){var e=function(e,t){var a=ee();return Object(Se.a)([ne,e],(function(){return a.then((function(t){return t.findGoByIdOrAlias(e)}))}),t)}(Object(Qe.h)().go,{retry:!1,onSuccess:function(e){Ze.push(e.href)}}),t=e.isLoading,a=e.isError,c=e.data;return a?Object(N.jsx)("span",{children:"Something went wrong!"}):t?Object(N.jsx)(Ke,{}):Object(N.jsxs)(Fe,{children:["You will be redirected to ",Object(N.jsx)("a",{href:c.href,children:c.href})," shortly..."]})},Xe=a(98),et=a(596),tt=a(628),at=Object(u.a)({icon:{fontSize:"10em"}}),ct=function(e){var t=e.className,a=Object(l.a)(e,["className"]),c=at(),n=ye(),r=Object(O.a)(n,1)[0];return Object(N.jsxs)(Fe,Object(s.a)(Object(s.a)({className:t},a),{},{children:[Object(N.jsx)(m.a,{className:c.iconContainer,children:Object(N.jsx)(tt.a,{className:c.icon})}),Object(N.jsx)(m.a,{variant:"h4",color:"textPrimary",children:"You have no Gos!"}),Object(N.jsx)(m.a,{color:"textSecondary",children:"Why don't you add some? :)"}),Object(N.jsx)(G.a,{variant:"contained",color:"primary",onClick:r,children:"Add a Go"})]}))};ct.defaultProps={className:void 0};var nt=ct,rt=a(597),it=a(630),ot=a(631),st=a(371),lt=a.n(st),jt=a(629),ut=a(370),bt=a.n(ut),dt=a(368),Ot=a.n(dt),ht=a(369),ft=a.n(ht),mt=function(e){e.className;var t=e.go,a=e.onClose,c=Object(l.a)(e,["className","go","onClose"]),n=Object(ge.useSnackbar)(),r=function(){var e=ee(),t=Object(te.b)();return Object(ae.a)((function(t){var a=t.current,c=t.updated;return e.then((function(e){return e.patchGo(a.id,Ae()(a,c))}))}),{onSuccess:function(e,a){var c=a.alias;t.invalidateQueries([ce]),t.invalidateQueries([ne,c])}})}().mutateAsync,i=Object(p.useCallback)((function(e,c){var i=c.setSubmitting;r({current:t,updated:Ae()(t,e)}).then((function(){return n.showMessage("Edited ".concat(e.alias))})).catch((function(){return n.showMessage("Can't edit ".concat(e.alias))})).finally((function(){i(!1),a()}))}),[t,a,n,r]);return Object(N.jsx)(ue,Object(s.a)(Object(s.a)({title:"Edit ".concat(t.alias),action:"Edit",onClose:a},c),{},{children:function(e){return Object(N.jsx)(ve,{onSubmit:i,innerRef:e,initialValues:t})}}))};mt.defaultProps={className:void 0};var xt=mt,vt=a(367),gt=a.n(vt),pt=function(e,t){var a=Object(ge.useSnackbar)(),c=function(){var e=ee(),t=Object(te.b)();return Object(ae.a)((function(t){var a=t.id;return e.then((function(e){return e.deleteGo(a)}))}),{onSuccess:function(e,a){var c=a.alias;t.invalidateQueries([ce]),t.removeQueries([ne,c])}})}().mutateAsync,n=Object(Ne.b)((function(){return Object(N.jsx)(xt,{go:e,onClose:o})}),[e]),r=Object(O.a)(n,2),i=r[0],o=r[1];return[Object(p.useCallback)((function(){i(),t()}),[t,i]),Object(p.useCallback)((function(){gt()(e.href)?a.showMessage("URL copied"):a.showMessage("Can't copy URL"),t()}),[t,e.href,a]),Object(p.useCallback)((function(){c(e).then((function(){return a.showMessage("Deleted ".concat(e.alias))})).catch((function(){return a.showMessage("Can't delete ".concat(e.alias))})),t()}),[t,c,e,a])]},Ct=Object(u.a)((function(e){return{icon:{minWidth:0,marginRight:e.spacing(3)}}})),Nt=function(e){var t=e.className,a=e.go,c=e.onClose,n=Object(l.a)(e,["className","go","onClose"]),r=Ct(),i=pt(a,c),o=Object(O.a)(i,3),j=o[0],u=o[1],b=o[2];return Object(N.jsxs)(D.a,Object(s.a)(Object(s.a)({MenuListProps:{dense:!0},className:d()(r.root,t),onClose:c},n),{},{children:[Object(N.jsxs)(L.a,{onClick:j,children:[Object(N.jsx)(jt.a,{className:r.icon,children:Object(N.jsx)(Ot.a,{fontSize:"small"})}),Object(N.jsx)(it.a,{children:"Edit"})]}),Object(N.jsxs)(L.a,{onClick:u,children:[Object(N.jsx)(jt.a,{className:r.icon,children:Object(N.jsx)(ft.a,{fontSize:"small"})}),Object(N.jsx)(it.a,{children:"Copy URL"})]}),Object(N.jsxs)(L.a,{onClick:b,children:[Object(N.jsx)(jt.a,{className:r.icon,children:Object(N.jsx)(bt.a,{fontSize:"small"})}),Object(N.jsx)(it.a,{children:"Delete"})]})]}))};Nt.defaultProps={className:void 0};var yt=Nt,St=Object(u.a)((function(e){return{href:{fontSize:e.typography.pxToRem(13)}}})),Pt=function(e){var t=e.className,a=e.go,c=Object(l.a)(e,["className","go"]),n=St(),r=Object(W.usePopupState)({variant:"popover"});return Object(N.jsxs)(rt.a,Object(s.a)(Object(s.a)({button:!0,className:d()(n.root,t)},c),{},{children:[Object(N.jsx)(it.a,{disableTypography:!0,primary:Object(N.jsx)(m.a,{variant:"subtitle1",children:a.alias}),secondary:Object(N.jsx)(m.a,{color:"textSecondary",className:n.href,noWrap:!0,children:a.href})}),Object(N.jsxs)(ot.a,{children:[Object(N.jsx)(x.a,Object(s.a)(Object(s.a)({},Object(W.bindTrigger)(r)),{},{children:Object(N.jsx)(lt.a,{})})),Object(N.jsx)(yt,Object(s.a)({go:a},Object(W.bindMenu)(r)))]})]}))};Pt.defaultProps={className:void 0};var kt=Pt,At=function(e){var t=e.className,a=e.gos,c=Object(l.a)(e,["className","gos"]);return 0===a.length?Object(N.jsx)(nt,{}):Object(N.jsx)(Xe.a,Object(s.a)(Object(s.a)({className:t},c),{},{children:Object(N.jsx)(et.a,{dense:!0,children:a.map((function(e){return Object(N.jsx)(kt,{go:e},e.id)}))})}))};At.defaultProps={className:void 0,gos:[]};var _t=At,wt=function(){var e=Pe(k()),t=e.isLoading,a=e.data;return t?Object(N.jsx)(Ke,{}):Object(N.jsx)(_t,{gos:a})},Rt=function(){var e=Object(c.b)().loginWithRedirect;return Object(N.jsx)(G.a,{onClick:function(){return e()},children:"Log In"})},Tt=function(e){var t=e.className,a=Object(l.a)(e,["className"]);return Object(N.jsxs)(Fe,Object(s.a)(Object(s.a)({className:t},a),{},{children:[Object(N.jsx)(m.a,{variant:"h1",color:"textPrimary",children:"Yougo"}),Object(N.jsx)(m.a,{color:"textSecondary",children:"Please sign in to use this site"}),Object(N.jsx)(Rt,{})]}))};Tt.defaultProps={className:void 0};var Et=Tt,It=function(){return Object(N.jsx)(ze,{children:Object(N.jsx)(Ie,{children:Object(N.jsx)(o,{fallback:Object(N.jsx)(Et,{}),children:Object(N.jsxs)(Qe.c,{children:[Object(N.jsx)(Qe.a,{path:"/",element:Object(N.jsx)(wt,{})}),Object(N.jsx)(Qe.a,{path:"/go/:go",element:Object(N.jsx)($e,{})})]})})})})},Dt=a(16),Lt=a.n(Dt),Gt=a(151);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Lt.a.render(Object(N.jsx)(C.a.StrictMode,{children:Object(N.jsx)(Gt.a,{history:Ze,children:Object(N.jsx)(It,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[589,1,2]]]);
//# sourceMappingURL=main.ee4b98da.chunk.js.map